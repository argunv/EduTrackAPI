-- Демонстрационные данные для EduTrack API
-- Используется ON CONFLICT DO NOTHING для безопасного повторного запуска

-- Школа
INSERT INTO schools (id, name, address, created_at)
VALUES 
    ('11111111-1111-1111-1111-111111111111', 'Демо Школа №1', 'Москва, ул. Демо, д. 1', NOW())
ON CONFLICT (id) DO NOTHING;

-- Класс
INSERT INTO classes (id, school_id, name, grade_level, created_at)
VALUES 
    ('22222222-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', '10А', 10, NOW())
ON CONFLICT (id) DO NOTHING;

-- Предметы
INSERT INTO subjects (id, name, created_at)
VALUES 
    ('33333333-3333-3333-3333-333333333331', 'Математика', NOW()),
    ('33333333-3333-3333-3333-333333333332', 'Русский язык', NOW()),
    ('33333333-3333-3333-3333-333333333333', 'Физика', NOW()),
    ('33333333-3333-3333-3333-333333333334', 'Химия', NOW()),
    ('33333333-3333-3333-3333-333333333335', 'История', NOW())
ON CONFLICT (id) DO NOTHING;

-- Пользователи (студенты и администратор)
-- Пароль для всех: demo123 (для админа: admin123)
INSERT INTO users (id, email, full_name, password_hash, created_at)
VALUES 
    -- Администратор
    ('00000000-0000-0000-0000-000000000001', 'admin@test.com', 'Администратор', '$2b$12$Jc1Nz9rZ2JqfI/0JF7xeDe7PRSeEs7KxGGmvzcykonYbiZe.tNoE.', NOW()),
    -- Студенты
    ('44444444-4444-4444-4444-444444444441', 'student1@demo.com', 'Иван Иванов', '$2b$12$Jc1Nz9rZ2JqfI/0JF7xeDe7PRSeEs7KxGGmvzcykonYbiZe.tNoE.', NOW()),
    ('44444444-4444-4444-4444-444444444442', 'student2@demo.com', 'Мария Петрова', '$2b$12$Jc1Nz9rZ2JqfI/0JF7xeDe7PRSeEs7KxGGmvzcykonYbiZe.tNoE.', NOW()),
    ('44444444-4444-4444-4444-444444444443', 'student3@demo.com', 'Алексей Сидоров', '$2b$12$Jc1Nz9rZ2JqfI/0JF7xeDe7PRSeEs7KxGGmvzcykonYbiZe.tNoE.', NOW()),
    -- Дополнительные пользователи для тестирования email
    ('44444444-4444-4444-4444-444444444444', 'vladislavargun200710@gmail.com', 'Vladislav Argun', '$2b$12$Jc1Nz9rZ2JqfI/0JF7xeDe7PRSeEs7KxGGmvzcykonYbiZe.tNoE.', NOW()),
    ('44444444-4444-4444-4444-444444444445', 'v_argun@inbox.ru', 'Vladislav Argun', '$2b$12$Jc1Nz9rZ2JqfI/0JF7xeDe7PRSeEs7KxGGmvzcykonYbiZe.tNoE.', NOW()),
    ('44444444-4444-4444-4444-444444444446', 'teacher1@demo.com', 'Анна Смирнова', '$2b$12$Jc1Nz9rZ2JqfI/0JF7xeDe7PRSeEs7KxGGmvzcykonYbiZe.tNoE.', NOW()),
    ('44444444-4444-4444-4444-444444444447', 'parent1@demo.com', 'Ольга Иванова', '$2b$12$Jc1Nz9rZ2JqfI/0JF7xeDe7PRSeEs7KxGGmvzcykonYbiZe.tNoE.', NOW())
ON CONFLICT (id) DO NOTHING;

-- Роли пользователей
INSERT INTO user_role_assignments (user_id, role, assigned_at)
VALUES 
    -- Администратор
    ('00000000-0000-0000-0000-000000000001', 'admin', NOW()),
    -- Студенты
    ('44444444-4444-4444-4444-444444444441', 'student', NOW()),
    ('44444444-4444-4444-4444-444444444442', 'student', NOW()),
    ('44444444-4444-4444-4444-444444444443', 'student', NOW()),
    ('44444444-4444-4444-4444-444444444444', 'student', NOW()),
    ('44444444-4444-4444-4444-444444444445', 'student', NOW()),
    ('44444444-4444-4444-4444-444444444446', 'teacher', NOW()),
    ('44444444-4444-4444-4444-444444444447', 'guardian', NOW())
ON CONFLICT (user_id, role) DO NOTHING;

-- Профили пользователей
INSERT INTO user_profiles (user_id, date_of_birth, show_birthday, avatar_url, updated_at)
VALUES 
    ('00000000-0000-0000-0000-000000000001', '1980-01-01', true, 'https://api.dicebear.com/7.x/avataaars/svg?seed=admin@test.com', NOW()),
    ('44444444-4444-4444-4444-444444444441', '2007-05-15', true, 'https://api.dicebear.com/7.x/avataaars/svg?seed=student1@demo.com', NOW()),
    ('44444444-4444-4444-4444-444444444442', '2007-08-20', true, 'https://api.dicebear.com/7.x/avataaars/svg?seed=student2@demo.com', NOW()),
    ('44444444-4444-4444-4444-444444444443', '2007-03-10', true, 'https://api.dicebear.com/7.x/avataaars/svg?seed=student3@demo.com', NOW()),
    ('44444444-4444-4444-4444-444444444444', '2007-10-20', true, 'https://api.dicebear.com/7.x/avataaars/svg?seed=vladislavargun200710@gmail.com', NOW()),
    ('44444444-4444-4444-4444-444444444445', '2007-10-20', true, 'https://api.dicebear.com/7.x/avataaars/svg?seed=v_argun@inbox.ru', NOW()),
    ('44444444-4444-4444-4444-444444444446', '1985-03-15', true, 'https://api.dicebear.com/7.x/avataaars/svg?seed=teacher1@demo.com', NOW()),
    ('44444444-4444-4444-4444-444444444447', '1980-07-22', true, 'https://api.dicebear.com/7.x/avataaars/svg?seed=parent1@demo.com', NOW())
ON CONFLICT (user_id) DO NOTHING;

-- Студенты
INSERT INTO students (id, user_id, school_id, enrolled_at)
VALUES 
    ('55555555-5555-5555-5555-555555555551', '44444444-4444-4444-4444-444444444441', '11111111-1111-1111-1111-111111111111', NOW()),
    ('55555555-5555-5555-5555-555555555552', '44444444-4444-4444-4444-444444444442', '11111111-1111-1111-1111-111111111111', NOW()),
    ('55555555-5555-5555-5555-555555555553', '44444444-4444-4444-4444-444444444443', '11111111-1111-1111-1111-111111111111', NOW()),
    ('55555555-5555-5555-5555-555555555554', '44444444-4444-4444-4444-444444444444', '11111111-1111-1111-1111-111111111111', NOW()),
    ('55555555-5555-5555-5555-555555555555', '44444444-4444-4444-4444-444444444445', '11111111-1111-1111-1111-111111111111', NOW())
ON CONFLICT (id) DO NOTHING;

-- Связь студентов с классами
INSERT INTO class_students (class_id, student_id)
VALUES 
    ('22222222-2222-2222-2222-222222222222', '55555555-5555-5555-5555-555555555551'),
    ('22222222-2222-2222-2222-222222222222', '55555555-5555-5555-5555-555555555552'),
    ('22222222-2222-2222-2222-222222222222', '55555555-5555-5555-5555-555555555553'),
    ('22222222-2222-2222-2222-222222222222', '55555555-5555-5555-5555-555555555554'),
    ('22222222-2222-2222-2222-222222222222', '55555555-5555-5555-5555-555555555555')
ON CONFLICT (class_id, student_id) DO NOTHING;

-- Новости
INSERT INTO news (id, school_id, author_id, title, content, preview_image_url, published_at, created_at)
VALUES 
    ('66666666-6666-6666-6666-666666666661', '11111111-1111-1111-1111-111111111111', '44444444-4444-4444-4444-444444444441', 
     'Добро пожаловать в новую систему!', 
     'Мы рады приветствовать вас в нашей новой системе электронного журнала.', 
     'https://via.placeholder.com/400x200', 
     NOW() - INTERVAL '5 days', 
     NOW()),
    ('66666666-6666-6666-6666-666666666662', '11111111-1111-1111-1111-111111111111', '44444444-4444-4444-4444-444444444441', 
     'Родительское собрание', 
     'Уважаемые родители! Приглашаем вас на родительское собрание 15 января.', 
     'https://via.placeholder.com/400x200', 
     NOW() - INTERVAL '2 days', 
     NOW()),
    ('66666666-6666-6666-6666-666666666663', '11111111-1111-1111-1111-111111111111', '44444444-4444-4444-4444-444444444441', 
     'Новогодние каникулы', 
     'С 30 декабря по 8 января - новогодние каникулы. Желаем всем хорошего отдыха!', 
     'https://via.placeholder.com/400x200', 
     NOW() - INTERVAL '1 day', 
     NOW()),
    ('66666666-6666-6666-6666-666666666664', '11111111-1111-1111-1111-111111111111', '44444444-4444-4444-4444-444444444441', 
     'Запланированная новость', 
     'Эта новость будет опубликована в будущем.', 
     'https://via.placeholder.com/400x200', 
     NOW() + INTERVAL '1 day', 
     NOW())
ON CONFLICT (id) DO NOTHING;

-- Оценки за промежуточную аттестацию
INSERT INTO interim_assessments (id, student_id, subject_id, school_year, semester, grade, comment, created_at)
VALUES 
    -- Студент 1
    ('77777777-7777-7777-7777-777777777771', '55555555-5555-5555-5555-555555555551', '33333333-3333-3333-3333-333333333331', 2024, 1, 5, 'Хорошая работа', NOW()),
    ('77777777-7777-7777-7777-777777777772', '55555555-5555-5555-5555-555555555551', '33333333-3333-3333-3333-333333333332', 2024, 1, 4, 'Хорошая работа', NOW()),
    ('77777777-7777-7777-7777-777777777773', '55555555-5555-5555-5555-555555555551', '33333333-3333-3333-3333-333333333333', 2024, 1, 5, 'Хорошая работа', NOW()),
    -- Студент 2
    ('77777777-7777-7777-7777-777777777774', '55555555-5555-5555-5555-555555555552', '33333333-3333-3333-3333-333333333331', 2024, 1, 4, 'Хорошая работа', NOW()),
    ('77777777-7777-7777-7777-777777777775', '55555555-5555-5555-5555-555555555552', '33333333-3333-3333-3333-333333333332', 2024, 1, 5, 'Хорошая работа', NOW()),
    ('77777777-7777-7777-7777-777777777776', '55555555-5555-5555-5555-555555555552', '33333333-3333-3333-3333-333333333333', 2024, 1, 4, 'Хорошая работа', NOW()),
    -- Студент 3
    ('77777777-7777-7777-7777-777777777777', '55555555-5555-5555-5555-555555555553', '33333333-3333-3333-3333-333333333331', 2024, 1, 5, 'Хорошая работа', NOW()),
    ('77777777-7777-7777-7777-777777777778', '55555555-5555-5555-5555-555555555553', '33333333-3333-3333-3333-333333333332', 2024, 1, 5, 'Хорошая работа', NOW()),
    ('77777777-7777-7777-7777-777777777779', '55555555-5555-5555-5555-555555555553', '33333333-3333-3333-3333-333333333333', 2024, 1, 4, 'Хорошая работа', NOW())
ON CONFLICT (id) DO NOTHING;

