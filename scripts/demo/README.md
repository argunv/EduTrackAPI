# Демонстрационные скрипты

Эта папка содержит скрипты для демонстрации работы email сервисов EduTrack API.

## Файлы

- `demo.sql` - SQL скрипт с демонстрационными данными (пользователи, школы, классы и т.д.)
- `demo_smtp.py` - Комплексный скрипт для тестирования всех email сервисов

## Использование

### Загрузка демонстрационных данных

```bash
task load-demo
```

Или напрямую:
```bash
./scripts/load_demo.sh
```

### Запуск демонстрации email сервисов

```bash
task demo:email
```

Или напрямую:
```bash
python3 scripts/demo/demo_smtp.py
```

## Требования

- PostgreSQL должен быть запущен локально на порту 5432
- RabbitMQ должен быть запущен локально на порту 5672
- База данных должна быть создана и миграции применены
- Переменные окружения должны быть настроены в `.env` файле
- Обязательно в .env тестовая БД: `DATABASE_URL=postgresql+asyncpg://edutrack:edutrack@postgres:5432/edutrack`


## Что тестирует demo_smtp.py

1. Отправка email одному получателю
2. Отправка email нескольким получателям
3. Массовая рассылка всем пользователям
4. Создание сообщения без получателей, затем отправка по email
5. Отправка email для восстановления пароля
6. Попытка восстановления пароля для несуществующего пользователя
7. Проверка статусов записей в outbox
8. Отправка нескольких сообщений одному получателю
9. Ожидание и проверка доставки email
10. Подтверждение восстановления пароля по токену

