<div align="center">

# üìö EduTrack API

**–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –¥–Ω–µ–≤–Ω–∏–∫–∞**

[![Python Version](https://img.shields.io/badge/python-3.11%2B-blue.svg)](https://www.python.org/downloads/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115%2B-009688.svg)](https://fastapi.tiangolo.com)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Code style: ruff](https://img.shields.io/badge/code%20style-ruff-000000.svg)](https://github.com/astral-sh/ruff)

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π RESTful API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∫–æ–ª—å–Ω—ã–º —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–º –¥–Ω–µ–≤–Ω–∏–∫–æ–º —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ü–µ–Ω–æ–∫, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –º–Ω–æ–≥–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ.

[–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏) ‚Ä¢
[–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç) ‚Ä¢
[–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-api) ‚Ä¢
[–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞) ‚Ä¢
[–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

</div>

---

## üìã –û –ø—Ä–æ–µ–∫—Ç–µ

EduTrack API ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π production-ready –±—ç–∫–µ–Ω–¥ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ —à–∫–æ–ª—å–Ω–æ–≥–æ –¥–Ω–µ–≤–Ω–∏–∫–∞, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–µ–∫–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç REST API –∏ —Å–µ—Ä–≤–∏—Å-—Ä–∞—Å—Å—ã–ª–∫—É notifier –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

### üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: FastAPI, Python 3.11+
- **Database**: PostgreSQL 16 (async SQLAlchemy + asyncpg)
- **Cache**: Redis 7 (connection pooling, graceful degradation)
- **Queue**: RabbitMQ 3.13 (aio-pika, retry logic)
- **Email**: aiosmtplib (async SMTP client)
- **Migrations**: Alembic
- **Security**: JWT (python-jose), bcrypt (passlib)
- **Deployment**: Docker, docker-compose
- **Development**: Poetry, Task

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏ (—Å—Ç—É–¥–µ–Ω—Ç—ã, —É—á–∏—Ç–µ–ª—è, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–æ–≤ (UI Avatars API)
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ email
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

### üè´ –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∫–æ–ª–∞–º–∏, –∫–ª–∞—Å—Å–∞–º–∏ –∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏
- ‚úÖ –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∂—É—Ä–Ω–∞–ª –æ—Ü–µ–Ω–æ–∫
- ‚úÖ –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏
- ‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏ —É—á–µ–Ω–∏–∫–æ–≤

### üí¨ –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–ª–∏—á–Ω—ã–µ –∏ –≥—Ä—É–ø–ø–æ–≤—ã–µ)
- ‚úÖ –ù–æ–≤–æ—Å—Ç–Ω–∞—è –ª–µ–Ω—Ç–∞
- ‚úÖ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—á–µ—Ä–µ–∑ RabbitMQ queue)
- ‚úÖ –ü–æ–∏—Å–∫ –æ–¥–Ω–æ–∫–ª–∞—Å—Å–Ω–∏–∫–æ–≤

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- ‚úÖ –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis —Å TTL –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ email (outbox pattern)
- ‚úÖ Graceful shutdown –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ Connection pooling –¥–ª—è –ë–î –∏ Redis
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RabbitMQ
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- ‚úÖ Health checks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Å–µ–∫—Ä–µ—Ç–∞ (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `*`)
- ‚úÖ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (bandit, safety)
- ‚úÖ Graceful error handling –¥–ª—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.11+
- Docker –∏ docker-compose
- Poetry (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

### üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

#### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/argunv/EduTrackAPI.git
cd EduTrackAPI
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ** –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `JWT_SECRET` ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ** –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `CORS_ORIGINS` ‚Äî —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö origins –¥–ª—è CORS
- `DEBUG` ‚Äî —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é False)

#### 3. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [Task](https://taskfile.dev/) –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã:
```bash
# macOS
brew install go-task

# Linux
sh -c "$(curl --location https://taskfile.dev/install.sh)" -- -d -b ~/.local/bin

# Windows
choco install go-task
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:
```bash
task up              # –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL, Redis, RabbitMQ, API –∏ notifier
task db:migrate      # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
task create-superuser # –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
task load-demo       # –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

#### 4. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Task)
```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3.11 -m venv venv
source venv/bin/activate  # –ù–∞ Windows: venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Poetry –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install poetry
poetry install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
docker-compose up -d postgres redis rabbitmq

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –ó–∞–ø—É—Å—Ç–∏—Ç—å API
uvicorn edutrack.presentation.api.main:app --reload

# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å notifier
python -m edutrack.notifier.main
```

### üåê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:

- **API**: http://127.0.0.1:8000
- **Swagger UI**: http://127.0.0.1:8000/docs
- **Health Check**: http://127.0.0.1:8000/health
- **RabbitMQ Management**: http://127.0.0.1:15672 (guest/guest)

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/v1/auth/register` ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/auth/login` ‚Äî –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–ø–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞)
- `GET /api/v1/profile/me` ‚Äî –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /api/v1/profile/me` ‚Äî –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å

#### üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
- `GET /api/v1/schools` ‚Äî –°–ø–∏—Å–æ–∫ —à–∫–æ–ª (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- `GET /api/v1/classes` ‚Äî –°–ø–∏—Å–æ–∫ –∫–ª–∞—Å—Å–æ–≤ (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- `GET /api/v1/subjects` ‚Äî –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- `GET /api/v1/students/{student_id}/grades` ‚Äî –û—Ü–µ–Ω–∫–∏ —É—á–µ–Ω–∏–∫–∞
- `POST /api/v1/grades` ‚Äî –í—ã—Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É (—Ç–æ–ª—å–∫–æ —É—á–∏—Ç–µ–ª—è)
- `GET /api/v1/lessons` ‚Äî –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤

#### üí¨ –°–æ–æ–±—â–µ–Ω–∏—è
- `GET /api/v1/messages` ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
- `POST /api/v1/messages` ‚Äî –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- `POST /api/v1/messages/{message_id}/send-email` ‚Äî –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ email

#### üì∞ –ù–æ–≤–æ—Å—Ç–∏
- `GET /api/v1/news` ‚Äî –°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π
- `POST /api/v1/news` ‚Äî –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)

#### üîë –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- `POST /api/v1/password-reset/request` ‚Äî –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- `POST /api/v1/password-reset/confirm` ‚Äî –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

### üìö –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
- **Swagger UI**: http://127.0.0.1:8000/docs
- **ReDoc**: http://127.0.0.1:8000/redoc

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Client    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  FastAPI    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ PostgreSQL  ‚îÇ
‚îÇ             ‚îÇ      ‚îÇ     API     ‚îÇ      ‚îÇ   Database  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ                     ‚ñ≤
                            ‚îÇ                     ‚îÇ
                            ‚ñº                     ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
                     ‚îÇ    Redis    ‚îÇ              ‚îÇ
                     ‚îÇ    Cache    ‚îÇ              ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                            ‚îÇ                     ‚îÇ
                            ‚îÇ                     ‚îÇ
                            ‚ñº                     ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
                     ‚îÇ  RabbitMQ   ‚îÇ              ‚îÇ
                     ‚îÇ    Queue    ‚îÇ              ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
                            ‚îÇ                     ‚îÇ
                            ‚ñº                     ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
                     ‚îÇ  Notifier   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ   Service   ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ SMTP Server ‚îÇ
                     ‚îÇ   (Email)   ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –ß–µ—Ä–µ–∑ Task (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
task test

# –ß–µ—Ä–µ–∑ Poetry
poetry run pytest --cov=edutrack

# –° –¥–µ—Ç–∞–ª—å–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
poetry run pytest -v --cov=edutrack --cov-report=html
```

#### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
HTML –æ—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ `htmlcov/index.html` –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ —Å —Ñ–ª–∞–≥–æ–º `--cov-report=html`.

### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

#### –õ–∏–Ω—Ç–µ—Ä—ã
```bash
task lint          # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –ª–∏–Ω—Ç–µ—Ä—ã (ruff, flake8, mypy)
task lint-fix      # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
```

–õ–∏–Ω—Ç–µ—Ä—ã –≤–∫–ª—é—á–∞—é—Ç:
- **ruff**: –ë—ã—Å—Ç—Ä—ã–π Python linter –∏ formatter
- **flake8**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞ (PEP 8)
- **mypy**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```bash
task security      # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–¥–∞ (bandit, safety)
```

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- **bandit**: –ü–æ–∏—Å–∫ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ Python –∫–æ–¥–µ
- **safety**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö

#### –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (CI)
```bash
task ci            # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ª–∏–Ω—Ç–µ—Ä—ã + —Ç–µ—Å—Ç—ã + –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
```

### üìã Taskfile –∫–æ–º–∞–Ω–¥—ã

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `task up` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (PostgreSQL, Redis, RabbitMQ, API, notifier) |
| `task down` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã (graceful shutdown) |
| `task db:migrate` | –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |
| `task test` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å coverage |
| `task logs` | –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ API –∏ notifier |
| `task save-logs` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª—ã |
| `task clear-logs` | –û—á–∏—Å—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ª–æ–≥–∏ |
| `task lint` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –ª–∏–Ω—Ç–µ—Ä—ã |
| `task lint-fix` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ª–∏–Ω—Ç–µ—Ä–æ–≤ |
| `task security` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–¥–∞ |
| `task ci` | –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (CI pipeline) |
| `task create-superuser` | –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `task load-demo` | –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
| `task demo:email` | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è email —Å–µ—Ä–≤–∏—Å–æ–≤ |

### üé¨ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

#### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
task load-demo
```

–°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
- –®–∫–æ–ª—ã –∏ –∫–ª–∞—Å—Å—ã
- –£—á–∏—Ç–µ–ª–µ–π –∏ —É—á–µ–Ω–∏–∫–æ–≤
- –ü—Ä–µ–¥–º–µ—Ç—ã –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- –û—Ü–µ–Ω–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è

#### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è email —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
task demo:email
```

–¢–µ—Å—Ç–∏—Ä—É–µ—Ç:
- –û—Ç–ø—Ä–∞–≤–∫—É email –æ–¥–Ω–æ–º—É –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º
- –ú–∞—Å—Å–æ–≤—É—é —Ä–∞—Å—Å—ã–ª–∫—É
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- –†–∞–±–æ—Ç—É outbox —Ç–∞–±–ª–∏—Ü—ã
- –î–æ—Å—Ç–∞–≤–∫—É email

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. `scripts/demo/README.md`

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Graceful Shutdown
```bash
./scripts/test_graceful_shutdown.sh  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. `scripts/test_graceful_shutdown_manual.md`

---

### –°–µ—Ä–≤–∏—Å—ã

#### 1. **API Service** (`api`)
- REST API –Ω–∞ FastAPI
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î (SQLAlchemy + asyncpg)
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- Health check endpoint

#### 2. **Notifier Service** (`notifier`)
- Consumer –æ—á–µ—Ä–µ–¥–∏ RabbitMQ (`email.send`)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ email —á–µ—Ä–µ–∑ SMTP
- Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π (3 –ø–æ–ø—ã—Ç–∫–∏)
- Graceful shutdown —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á (–¥–æ 30 —Å–µ–∫—É–Ω–¥)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ outbox —Ç–∞–±–ª–∏—Ü—ã `email_outbox`

#### 3. **Migrator Service** (`migrator`)
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Alembic
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —á–µ—Ä–µ–∑ docker-compose
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Å—Ö–µ–º—ã –ë–î

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏

#### üîÑ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
- –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (schools/classes/subjects) —Å TTL
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤ –∏ —Å–ø–∏—Å–∫–∏ –æ—Ü–µ–Ω–æ–∫
- Graceful degradation: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis
- Connection pool –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
- –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

#### üì® –û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π (RabbitMQ)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ email —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å `email.send`
- Outbox pattern: —Ç–∞–±–ª–∏—Ü–∞ `email_outbox` –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- Dead letter queue –¥–ª—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫

#### üõ°Ô∏è Graceful Shutdown
- **API**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç FastAPI lifespan events –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **Notifier**: –û–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á (–¥–æ 30 —Å–µ–∫—É–Ω–¥)
- –í—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–ë–î, Redis, RabbitMQ) –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ SIGTERM/SIGINT
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: `./scripts/test_graceful_shutdown.sh`

#### üñºÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ [UI Avatars API](https://ui-avatars.com)
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ API –∫–ª—é—á–µ–π
- –°–æ–∑–¥–∞–µ—Ç –∞–≤–∞—Ç–∞—Ä —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **Redis**: Graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **RabbitMQ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏, outbox –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ failed
- **Email**: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π SMTP —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **Notifier**: Retry —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π (3 –ø–æ–ø—ã—Ç–∫–∏)
- Structured logging (structlog) –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
EduTrackAPI/
‚îú‚îÄ‚îÄ src/edutrack/              # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ application/           # Application services (use cases)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py           # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ grades.py         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messages.py       # –°–∏—Å—Ç–µ–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ password_reset.py # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ domain/               # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/       # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache/           # Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db/              # SQLAlchemy –º–æ–¥–µ–ª–∏ –∏ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email/           # Email –æ—Ç–ø—Ä–∞–≤–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queue/           # RabbitMQ publisher
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/        # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ notifier/            # Email notifier service
‚îÇ   ‚îú‚îÄ‚îÄ presentation/        # API layer
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ routes/      # FastAPI —Ä–æ—É—Ç—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ dependencies/ # DI dependencies
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ schemas.py   # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îî‚îÄ‚îÄ config/              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ alembic/                  # Database migrations
‚îú‚îÄ‚îÄ scripts/                  # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ demo/                # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ create_admin.py      # –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ test_graceful_shutdown.sh
‚îú‚îÄ‚îÄ tests/                    # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ docker-compose.yml        # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile               # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ pyproject.toml           # Poetry dependencies
‚îú‚îÄ‚îÄ Taskfile.yaml            # Task –∫–æ–º–∞–Ω–¥—ã
‚îî‚îÄ‚îÄ README.md                # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| `JWT_SECRET` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤ (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞) | `your-super-secret-jwt-key-minimum-32-characters-long` |
| `DATABASE_URL` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL | `postgresql+asyncpg://user:pass@localhost:5432/edutrack` |

#### SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–ª—è email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------------|----------|--------|
| `SMTP_HOST` | SMTP —Å–µ—Ä–≤–µ—Ä | `smtp.gmail.com` |
| `SMTP_PORT` | SMTP –ø–æ—Ä—Ç | `587` |
| `SMTP_USER` | SMTP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | `your-email@gmail.com` |
| `SMTP_PASSWORD` | SMTP –ø–∞—Ä–æ–ª—å | `your-app-password` |
| `SMTP_USE_TLS` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TLS | `True` |
| `SMTP_FROM` | Email –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è | `noreply@edutrack.local` |

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `ENVIRONMENT` | –û–∫—Ä—É–∂–µ–Ω–∏–µ (dev/prod) | `dev` |
| `DEBUG` | –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ | `False` |
| `CORS_ORIGINS` | –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö origins –¥–ª—è CORS | `[http://localhost,http://127.0.0.1]` |
| `REDIS_URL` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis | `redis://localhost:6379/0` |
| `RABBITMQ_URL` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ RabbitMQ | `amqp://guest:guest@localhost:5672/` |

**–í–∞–∂–Ω–æ**: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `CORS_ORIGINS` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å `"*"` –≤ —Ü–µ–ª—è—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–º. –≤ —Ñ–∞–π–ª–µ [`env.example`](env.example).

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: API –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º**: –û—à–∏–±–∫–∞ `JWT_SECRET must be at least 32 characters long`

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` —Ñ–∞–π–ª–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `JWT_SECRET` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞.

### –ü—Ä–æ–±–ª–µ–º–∞: Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º**: –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ `email_outbox`, –Ω–æ –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ notifier —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω: `docker-compose logs notifier`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ notifier –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ SMTP

### –ü—Ä–æ–±–ª–µ–º–∞: –ö—ç—à –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º**: –ó–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ, Redis logs –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω: `docker-compose ps redis`
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ Redis (graceful degradation)
3. –î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Redis: `docker-compose restart redis`

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–π

**–°–∏–º–ø—Ç–æ–º**: `alembic upgrade head` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î: `docker-compose ps postgres`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ë–î —Å–æ–∑–¥–∞–Ω–∞: `docker-compose exec postgres psql -U edutrack -l`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é: `alembic downgrade -1`
4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–Ω–æ–≤–æ: `alembic upgrade head`

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç

**–°–∏–º–ø—Ç–æ–º**: `pytest` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î/Redis

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã: `task up`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã –Ω–µ –∑–∞–Ω—è—Ç—ã –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à pytest: `rm -rf .pytest_cache`

---

## ü§ù Contributing

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º:

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **Fork** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ **feature branch**: `git checkout -b feature/amazing-feature`
3. **Commit** –∏–∑–º–µ–Ω–µ–Ω–∏—è: `git commit -m 'Add amazing feature'`
4. **Push** –≤ branch: `git push origin feature/amazing-feature`
5. –û—Ç–∫—Ä–æ–π—Ç–µ **Pull Request**

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞

- –°–ª–µ–¥—É–π—Ç–µ PEP 8 (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è ruff –∏ flake8)
- –î–æ–±–∞–≤–ª—è–π—Ç–µ type hints (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è mypy)
- –ü–∏—à–∏—Ç–µ docstrings –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ü–æ–∫—Ä—ã–≤–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–æ–¥ —Ç–µ—Å—Ç–∞–º–∏
- –ó–∞–ø—É—Å–∫–∞–π—Ç–µ `task ci` –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º PR

### Commit —Å–æ–æ–±—â–µ–Ω–∏—è

–°–ª–µ–¥—É–π—Ç–µ [Conventional Commits](https://www.conventionalcommits.org/):
- `feat:` ‚Äî –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- `fix:` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
- `docs:` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- `style:` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- `refactor:` ‚Äî —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- `test:` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- `chore:` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Ç.–¥.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

## üë• –ê–≤—Ç–æ—Ä—ã

- **EduTrack Team** - *–ù–∞—á–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞*

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

- üêõ –°–æ–æ–±—â–∏—Ç–µ –æ –±–∞–≥–µ —á–µ—Ä–µ–∑ [GitHub Issues](https://github.com/argunv/EduTrackAPI/issues)
- üí° –ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é —á–µ—Ä–µ–∑ [GitHub Issues](https://github.com/argunv/EduTrackAPI/issues)
- üìß –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º: noreply@edutrack.local

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [FastAPI](https://fastapi.tiangolo.com/) ‚Äî –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [SQLAlchemy](https://www.sqlalchemy.org/) ‚Äî –∑–∞ –º–æ—â–Ω—ã–π ORM
- [UI Avatars](https://ui-avatars.com/) ‚Äî –∑–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–≤–∞—Ç–∞—Ä–æ–≤
- –í—Å–µ–º –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–∞–º –ø—Ä–æ–µ–∫—Ç–∞!

---

<div align="center">

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –∫–æ–º–∞–Ω–¥–æ–π EduTrack**

[‚¨Ü –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –Ω–∞—á–∞–ª—É](#-edutrack-api)

</div>
